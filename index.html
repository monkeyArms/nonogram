<!doctype html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Picture Crossword (Nonogram)</title>

	<link rel="stylesheet" href="css/foundation/foundation.min.css" type="text/css" />
	<link rel="stylesheet" href="css/app/1-base.css" type="text/css" />
	<link rel="stylesheet" href="css/app/2-small.css" type="text/css" />
	<link rel="stylesheet" href="css/app/3-medium.css" type="text/css" />
	<link rel="stylesheet" href="css/app/4-large.css" type="text/css" />

</head>

<body>

<div id="page">

	<header id="site-header">
		<h1>
			Picture Crossword
			(<a href="https://en.wikipedia.org/wiki/Nonogram" target="_blank">Nonogram</a>)
		</h1>
	</header>

	<main>

		<ul class="tabs" data-tabs id="option-tabs">
			<li class="tabs-title is-active icon generate"><a href="#generate-puzzle" aria-selected="true">Generate
				Random Puzzle</a></li>
			<li class="tabs-title create icon "><a href="#create-puzzle">Draw Puzzle</a></li>
			<li class="tabs-title hints icon "><a href="#solve-puzzle">Solve Puzzle</a></li>
		</ul>

		<div class="tabs-content" data-tabs-content="option-tabs">

			<div class="tabs-panel is-active" id="generate-puzzle">
				<div class="row controls">
					<div class="columns">
						<select id="generate-width" class="width" aria-label="Width"></select>
						<label class="x">x</label>
						<select id="generate-height" class="height" aria-label="Height"></select>

						<button id="generate-button" class="button icon generate">Generate</button>
					</div>
				</div>
				<div class="row">
					<div class="shrink columns">
						<div class="grid-container"></div>
					</div>
					<div class="columns">
						<div class="grid-controls"></div>
						<div class="console"></div>
					</div>
				</div>
			</div>

			<div class="tabs-panel" id="create-puzzle">
				<div class="row controls">
					<div class="columns">
						<select id="create-width" class="width" aria-label="Width"></select>
						<label class="x">x</label>
						<select id="create-height" class="height" aria-label="Height"></select>

						<button id="create-button" class="button icon create">Start Drawing</button>
					</div>
				</div>
				<div class="row">
					<div class="shrink columns">
						<div class="grid-container"></div>
					</div>
					<div class="columns">
						<div class="grid-controls"></div>
						<div class="console"></div>
					</div>
				</div>
			</div>

			<div class="tabs-panel" id="solve-puzzle">
				<div class="row controls">
					<div class="columns">
						<select id="solve-width" class="width" aria-label="Width"></select>
						<label class="x">x</label>
						<select id="solve-height" class="height" aria-label="Height"></select>

						<button id="solve-button" class="button icon hints">Enter Hints</button>
					</div>
				</div>
				<div class="row">
					<div class="shrink columns">
						<div class="grid-container"></div>
					</div>
					<div class="columns">
						<div class="grid-controls"></div>
						<div class="console"></div>
					</div>
				</div>
			</div>
		</div>

	</main>

</div>


<script src="js/jquery/jquery-2.1.4.min.js"></script>
<script src="js/foundation/foundation.min.js"></script>

<script src="js/nonogram/nonogram.js"></script>
<script src="js/nonogram/puzzle.js"></script>
<script src="js/nonogram/puzzle-cell.js"></script>
<script src="js/nonogram/puzzle-line.js"></script>
<script src="js/nonogram/utility.js"></script>
<script src="js/nonogram/gui.js"></script>
<script src="js/nonogram/creator.js"></script>
<script src="js/nonogram/solver.js"></script>
<script src="js/nonogram/predefined.js"></script>

<script>


	$( document ).foundation();


	// ####################################################

	/*
	var p = Nonogram.PredefinedPuzzles.p_30x30_1;


	var puzzle = new Nonogram.Puzzle( p.width, p.height );

	if(p.solutionGrid) {
		puzzle.createFromGrid( p.solutionGrid );
	} else {
		puzzle.createFromHints( p.hints );
	}


	var gui = new Nonogram.Gui( puzzle );

	gui.drawPuzzle( $( '#generate-puzzle .grid-container' ) );
	gui.drawSolution();


	var solver = new Nonogram.Solver( puzzle );
	solver.solve();


	$( document ).ready( function()
	{
		gui.drawAiSolution();
		gui.drawPreviewSolution( $( '#generate-puzzle .nonogram td.preview' ) );
		gui.drawAiSolutionLog( solver, $( '#generate-puzzle .console' ) );
	});
	*/

	// ####################################################	generate puzzle

	let optionHtml = '',
		i;

	for (i = 5; i <= 30; i++) {
		optionHtml += '<option value="' + i + '">' + i + '</option>';
	}

	$( 'select.width' ).html( optionHtml ).val( 30 );
	$( 'select.height' ).html( optionHtml ).val( 30 );

	$( '#generate-button' ).on( 'click', function ( e )
	{
		/*
		var p       = Nonogram.PredefinedPuzzles.p_8x8_2;
		var puzzle2 = new Nonogram.Puzzle( p.width, p.height );

		puzzle2.createFromHints( p.hints );
		*/

		const width     = $( '#generate-width' ).val(),
			  height    = $( '#generate-height' ).val(),
			  $grid     = $( '#generate-puzzle .grid-container' ),
			  $console  = $( '#generate-puzzle .console' ),
			  $controls = $( '#generate-puzzle .grid-controls' ),
			  puzzle    = new Nonogram.Puzzle( width, height ),
			  creator   = new Nonogram.Creator( puzzle ),
			  gui       = new Nonogram.Gui( puzzle );


		// #############################################
		/*
				let LP = {};

				LP.Puzzle = class
				{
					constructor( width, height )
					{
						this.width = parseInt( width, 10 );
						this.reset();
					}


					reset()
					{
						console.log( 'called "LP.Puzzle.reset()"' );
					}
				};

				let puzzleTest = new LP.Puzzle( 5, 5 );

				console.log( LP );
				console.log( puzzleTest );
				puzzleTest.reset();
				console.log( '---------' );
				console.log( '---------' );

				// ----------

				var LogicPic2 = {};

				LogicPic2.Puzzle = function ( width, height )
				{
					this.width = parseInt( width, 10 );
					this.reset();
				};

				LogicPic2.Puzzle.prototype.reset = function ()
				{
					console.log( 'called "LogicPic2.Puzzle.prototype.reset()"' );
				};

				let test2 = new LogicPic2.Puzzle( 5, 5 );


				console.log( LogicPic2 );
				console.log( test2 );
				console.log( test2.reset );
				test2.reset();
				console.log( '---------' );

				//console.log( puzzle );
		*/
		// #############################################

		e.preventDefault();

		creator.create();
		gui.drawPuzzle( $grid );
		gui.drawCreatorLog( creator, $console );
		gui.drawUserControls( $controls );
		gui.makePuzzlePlayable();

		//gui.showPuzzleSolvedAnimation();
	} );

	window.addEventListener( 'load', function ()
	{
		$( '#generate-button' ).trigger( 'click' );

		setTimeout( function ()
		{
			$( '#solve-button' ).trigger( 'click' );
		}, 10 );
	} );


</script>


</body>
</html>
